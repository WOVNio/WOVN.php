<?xml version="1.0"?>
<ruleset name="WOVNio">
  <arg value="s" /> <!-- show sniff codes in all reports -->
  <arg value="p" /> <!-- show progress of the run -->
  <arg name="colors" />

  <file>./</file>
  <exclude-pattern>./vendor</exclude-pattern>
  <!-- TODO: fix excluded files below -->
  <exclude-pattern>./src/wovn_helper.php</exclude-pattern>
  <exclude-pattern>./src/wovn_interceptor.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/html/HtmlConverter.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/html/HtmlReplaceMarker.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/modified_vendor/SimpleHtmlDom.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/modified_vendor/SimpleHtmlDomNode.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/utils/request_handlers/AbstractRequestHandler.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/utils/request_handlers/CurlRequestHandler.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/utils/request_handlers/FileGetContentsRequestHandler.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/utils/request_handlers/RequestHandlerFactory.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/wovnphp/API.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/wovnphp/Headers.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/wovnphp/Lang.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/wovnphp/SSI.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/wovnphp/Store.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/wovnphp/Url.php</exclude-pattern>
  <exclude-pattern>./src/wovnio/wovnphp/Utils.php</exclude-pattern>
  <exclude-pattern>./test/helpers/EnvFactory.php</exclude-pattern>
  <exclude-pattern>./test/helpers/HeadersMock.php</exclude-pattern>
  <exclude-pattern>./test/helpers/StoreAndHeadersFactory.php</exclude-pattern>
  <exclude-pattern>./test/integration/SSIWovnIndexSampleTest.php</exclude-pattern>
  <exclude-pattern>./test/integration/WovnIndexSampleTest.php</exclude-pattern>
  <exclude-pattern>./test/unit/APITest.php</exclude-pattern>
  <exclude-pattern>./test/unit/HeadersTest.php</exclude-pattern>
  <exclude-pattern>./test/unit/html/HtmlConverterTest.php</exclude-pattern>
  <exclude-pattern>./test/unit/html/HtmlReplaceMakerTest.php</exclude-pattern>
  <exclude-pattern>./test/unit/LangTest.php</exclude-pattern>
  <exclude-pattern>./test/unit/modified_vendor/SimpleHtmlDomTest.php</exclude-pattern>
  <exclude-pattern>./test/unit/SSITest.php</exclude-pattern>
  <exclude-pattern>./test/unit/StoreTest.php</exclude-pattern>
  <exclude-pattern>./test/unit/UrlTest.php</exclude-pattern>
  <exclude-pattern>./test/unit/utils/request_handlers/CurlRequestHandlerTest.php</exclude-pattern>
  <exclude-pattern>./test/unit/utils/request_handlers/FileGetContentsRequestHandlerTest.php</exclude-pattern>
  <exclude-pattern>./test/unit/UtilsTest.php</exclude-pattern>
  <exclude-pattern>./wovn_index_sample.php</exclude-pattern>

  <rule ref="Internal.Tokenizer.Exception">
    <type>error</type>
  </rule>

  <!-- https://www.php-fig.org/psr/psr-2/ -->
  <rule ref="PSR2">
    <!-- PHP 5.3 doesn't allow calling private method inside anonymous
         functions, so we use '_' for implicit visibility in some classes -->
    <exclude name="Squiz.Scope.MethodScope.Missing" />
    <!-- TODO: Fix and remove once other rules are fixed -->
    <exclude name="Generic.WhiteSpace.ScopeIndent.IncorrectExact" />
    <exclude name="Generic.WhiteSpace.ScopeIndent.Incorrect" />
  </rule>

  <!-- use camelCase everywhere (PSR2 forces it for class members only) -->
  <rule ref="Generic.NamingConventions.CamelCapsFunctionName" />
  <rule ref="Zend.NamingConventions.ValidVariableName" />
</ruleset>
